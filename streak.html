<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Detalhes da Streak</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/streak.css">
</head>
<body>
    <!-- Header -->
    <header class="header-rectangle">
        <div class="left-buttons">
            <button onclick="window.location.href='index.html';" class="home-button">
                <i class="fa-solid fa-house"></i>
            </button>
        </div>
        <div class="user-photo">
            <img id="profile-picture" src="images/Chococat.webp" alt="Foto do Usuário" onclick="toggleImageSelection()">
        </div>
    </header>

    <!-- Contêiner de seleção de imagem -->
    <div id="image-selection" class="image-selection hidden">
        <h2>Escolha sua foto de perfil</h2>
        <div class="image-options">
            <img src="images/Chococat.webp" alt="Chococat" onclick="selectProfilePicture('images/Chococat.webp')">
            <!-- Outras imagens omitidas para brevidade -->
        </div>
        <button onclick="toggleImageSelection()">Fechar</button>
    </div>

    <!-- Conteúdo principal da página -->
    <div id="streak-content">
        <div id="streak-details">
            <h1 id="streak-name">Nome da Streak</h1>
            <div class="streak-buttons">
                <button onclick="editStreak()">Editar Streak</button>
                <!-- Botão atualizado para abrir o modal de confirmação -->
                <button onclick="openDeleteStreakConfirmation()">Excluir Streak</button>
            </div>
            <div id="calendar-container">
                <h2>Calendário de Check-ins</h2>
                <div id="calendar-header">
                    <button onclick="prevMonth()"><</button>
                    <span id="month-year"></span>
                    <button onclick="nextMonth()">></button>
                </div>
                <table id="calendar">
                    <thead>
                        <tr>
                            <th>Seg</th>
                            <th>Ter</th>
                            <th>Qua</th>
                            <th>Qui</th>
                            <th>Sex</th>
                            <th>Sáb</th>
                            <th>Dom</th>
                        </tr>
                    </thead>
                    <tbody id="calendar-body">
                        <!-- Dias do mês serão inseridos aqui dinamicamente via JavaScript -->
                    </tbody>
                </table>
            </div>

            <div id="checkin-count">
                <h2>Total de Check-ins:</h2>
                <p id="checkin-total">0 dias</p>
                <div id="checkin-filters">
                    <button onclick="showTotalCheckins('all')">Todos os dias</button>
                    <button onclick="showTotalCheckins('monthly')">Dias deste mês</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal de confirmação de exclusão de check-in -->
    <div id="confirmModal" class="modal" style="display: none;">
        <div class="modal-content">
            <p>Deseja realmente excluir o check-in deste dia?</p>
            <button onclick="confirmDeleteCheckin()">Sim, excluir</button>
            <button onclick="closeModal()">Cancelar</button>
        </div>
    </div>

    <!-- Modal de confirmação de exclusão da streak -->
    <div id="confirmStreakDeleteModal" class="modal" style="display: none;">
        <div class="modal-content">
            <p>Deseja realmente excluir esta streak?</p>
            <button onclick="confirmDeleteStreak()">Sim, excluir</button>
            <button onclick="closeStreakModal()">Cancelar</button>
        </div>
    </div>

    <!-- Scripts -->
    <script src="js/streak.js"></script>
    <script>
        function goBack() {
            window.location.href = 'index.html';
        }

        function toggleImageSelection() {
            document.getElementById("image-selection").classList.toggle("hidden");
        }

        function selectProfilePicture(imagePath) {
            localStorage.setItem('userPhoto', imagePath);
            updateProfilePicture(imagePath);
            toggleImageSelection();
        }

        function updateProfilePicture(imagePath) {
            const profilePicture = document.getElementById("profile-picture");
            if (profilePicture) {
                profilePicture.src = imagePath;
            }
        }

        document.addEventListener('DOMContentLoaded', () => {
            const savedPhoto = localStorage.getItem('userPhoto');
            if (savedPhoto) {
                updateProfilePicture(savedPhoto);
            }
        });
    </script>
</body>
</html>
